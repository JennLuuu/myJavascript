<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="UTF-8" />
    <meta name="keywords" content="" />
    <meta name="description" content="" />
    <title>回到顶部通用动画版time3</title>
    <style>
        .con {
          height: 8000px;
          background-color: beige;
        }
        .btn {
          width: 40px;
          height: 80px;
          background-color: olivedrab;
          color: #fff;
          border-radius: 9px;
          position: fixed;
          right: 20px;
          bottom: 50px;
          display: none;
        }
      </style>
  </head>
  <body>
    <div class="con">
      我滚啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦<br />啦
    </div>
    <button class="btn">返回顶部</button>
    <script>
      var oBtn = document.querySelector(".btn");

      //绑定window的滚动事件
      window.onscroll = function () {
        var scrollTop = window.pageYOffset;
        if (scrollTop >= 500) {
          oBtn.style.display = "block";
        } else {
          oBtn.style.display = "none";
        }
      };

      //按钮绑定点击事件
      oBtn.onclick = function () {
        //动画起始位置
        var start = window.pageYOffset;
        //动画结束位置
        var end = 0;
        //动画总步数
        var totalStep = 23;
        //动画每一步走的距离
        var everyStep = (end - start) / totalStep;
        //初始步数(为了判断终止条件)
        var startStep = 0;

        //动画开始前
        var timer = setInterval(() => {
          startStep++;
          //如果达到条件就清除定时器,结束动画
          if (startStep >= totalStep) {
            clearInterval(timer);
          }
          //没满足条件.就让距离累加,并赋给滚动条
          start += everyStep;
          window.scrollTo(0, start);
        }, 20);
      };
    </script>
  </body>
</html>
